{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/patchProp.ts"],
  "sourcesContent": ["// runtime-dom \u53EA\u662F\u63D0\u4F9B\u4E00\u4E9B\u6E32\u67D3\u7684\u65B9\u6CD5\uFF08renderOptions\uFF09\uFF0C\u4F8B\u5982\u6211\u4EEC\u5C06\u865A\u62DFdom\u6E32\u67D3\u5230\u6D4F\u89C8\u5668\uFF0C\u5C31\u9700\u8981\u64CD\u4F5Cdom\u7684\u65B9\u6CD5\nimport { assign } from \"@vue/shared\";\nimport { createRenderer, h } from \"@vue/runtime-core\";\nimport { nodeOps } from \"./nodeOps\";\nimport { patchProp } from \"./patchProp\";\n\nconst renderOptions = assign(nodeOps, { patchProp });\n\n// createRenderer(renderOptions).render(\n//   h(\"div\", { class: \"aa\" }, \"\u6211\u662F\u513F\u5B50\"),\n//   document.getElementById(\"app\")\n// );\nexport function render(vnode, container) {\n  createRenderer(renderOptions).render(vnode, container);\n}\nexport * from \"@vue/runtime-core\";\n", "const isObject = (val: any): boolean => {\n  return typeof val === \"object\" && val !== null;\n};\nconst isFunction = (value) => {\n  return typeof value === \"function\";\n};\nconst isNumber = (value) => typeof value === \"number\";\nconst isString = (value) => typeof value === \"string\";\n\nconst isArray = Array.isArray;\nconst assign = Object.assign;\n\nexport const enum ShapeFlags {\n  ELEMENT = 1,\n  FUNCTIONAL_COMPONENT = 1 << 1,\n  STATEFUL_COMPONENT = 1 << 2,\n  TEXT_CHILDREN = 1 << 3,\n  ARRAY_CHILDREN = 1 << 4,\n  SLOTS_CHILDREN = 1 << 5,\n  TELEPORT = 1 << 6,\n  SUSPENSE = 1 << 7,\n  COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\n  COMPONENT_KEPT_ALIVE = 1 << 9,\n  COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT,\n}\nexport { isObject, isFunction, isArray, assign, isNumber, isString };\n", "import { isString, ShapeFlags, isArray } from \"@vue/shared\";\nexport const Text = Symbol(\"Text\");\nexport function isVnode(value) {\n  return !!(value && value.__v_isVnode);\n}\n// \u7EC4\u4EF6 \u5143\u7D20 \u6587\u672C\nexport function createVnode(type, props, children = null) {\n  // type \u662Fstring\u7684\u8BDD\uFF0C\u5C31\u8868\u660E\u8FD9\u662F\u4E00\u4E2A\u5143\u7D20\n  let shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0;\n  const vnode = {\n    type,\n    props,\n    children,\n    key: props?.key, // \u6709key\u5C31\u62FF\uFF0C\u6CA1\u6709\u5C31\u662Fundefined\n    el: null, // \u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\n    __v_isVnode: true,\n    shapeFlag,\n  };\n  if (children) {\n    let type = 0;\n    if (isArray(children)) {\n      type = ShapeFlags.ARRAY_CHILDREN;\n    } else {\n      // \u5B57\u7B26\u4E32\n      children = String(children);\n      type = ShapeFlags.TEXT_CHILDREN;\n    }\n    // \u8FD9\u6837\u5C31\u53EF\u4EE5\u6807\u8BC6\u51FA\u8FD9\u4E2A\u865A\u62DF\u8282\u70B9 \u662F\u5143\u7D20\u6216\u5B57\u7B26\u4E32\uFF0C\u4EE5\u53CA\u662F\u5143\u7D20\u7684\u8BDD\uFF0C\u8FD9\u4E2A\u5143\u7D20\u7684children\u662F\u6570\u7EC4\u8FD8\u662F\u5B57\u7B26\u4E32\n    vnode.shapeFlag = vnode.shapeFlag | type;\n  }\n  return vnode;\n}\n", "import { isString, ShapeFlags } from \"@vue/shared\";\nimport { createVnode, Text } from \"./vnode\";\nexport function createRenderer(renderOptions) {\n  const {\n    insert: hostInsert,\n    setElementText: hostSetElementText,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    remove: hostRemove,\n  } = renderOptions;\n  const normalize = (child) => {\n    if (isString(child)) {\n      return createVnode(Text, null, child);\n    }\n    return child;\n  };\n  const mountChildren = (children, container) => {\n    for (let i = 0; i < children.length; i++) {\n      let child = normalize(children[i]);\n      patch(null, child, container);\n    }\n  };\n  const mountElement = (vnode, container) => {\n    let { type, props, children, shapeFlag } = vnode;\n    let el = (vnode.el = hostCreateElement(type));\n    if (props) {\n      for (const key in props) {\n        hostPatchProp(el, key, null, props[key]);\n      }\n    }\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      // \u6587\u672C\n      hostSetElementText(el, children);\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n      // \u6570\u7EC4\n      mountChildren(children, el);\n    }\n    // \u5C06\u8BE5\u5143\u7D20\u63D2\u5165\u5230\u5BB9\u5668\u91CC\n    hostInsert(el, container);\n  };\n  const processText = (n1, n2, container) => {\n    if (n1 == null) {\n      // \u521D\u59CB\u5316\n      hostInsert((n2.el = hostCreateText(n2.children)), container);\n    }\n  };\n  const patch = (n1, n2, container) => {\n    if (n1 === n2) return;\n    const { type, shapeFlag } = n2;\n    if (n1 == null) {\n      // \u8001\u7684\u865A\u62DF\u8282\u70B9\u662Fnull\uFF0C\u5C31\u6302\u8F7D\n      switch (type) {\n        case Text: // h('hello') \u5E0C\u671B\u76F4\u63A5\u6E32\u67D3\u51FA\u4E00\u4E2A\u5B57\u7B26\u4E32\n          processText(n1, n2, container);\n          break;\n        default:\n          if (shapeFlag & ShapeFlags.ELEMENT) {\n            mountElement(n2, container);\n          }\n      }\n    } else {\n      // \u66F4\u65B0\n    }\n  };\n  const unmount = (vnode) => {\n    hostRemove(vnode.el);\n  };\n  const render = (vnode, container) => {\n    if (vnode == null) {\n      // \u5378\u8F7D\n      if (container._vnode) {\n        unmount(container._vnode);\n      }\n    } else {\n      // \u8FD9\u91CC\u65E2\u6709\u521D\u59CB\u5316\u7684\u903B\u8F91\uFF0C\u53C8\u6709\u66F4\u65B0\u7684\u903B\u8F91\n      // conatiner\u6302\u8F7D\u8FC7\u4E86\u5C31\u4F1A\u6709_vnode\u5C5E\u6027\uFF0C\u90A3\u4E48\u5C31\u4F1A\u8D70\u66F4\u65B0\u7684\u903B\u8F91\n      patch(container._vnode || null, vnode, container);\n    }\n    // render\u7684\u65F6\u5019\uFF0C\u6302\u4E86\u4E00\u4E2A_vnode\u5C5E\u6027\n    container._vnode = vnode;\n  };\n  return {\n    render,\n  };\n}\n", "import { isArray, isObject } from \"@vue/shared\";\nimport { createVnode, isVnode } from \"./vnode\";\n/**\n * h('div')\n * h('div',{style:{color:\"red\"}})\n * h('div',{style:{color:\"red\"}},'hello')\n * h('div',{style:{color:\"red\"}},[h('span',{},'gg'),h('p',{},'ll')])\n * @param type //\u7C7B\u578B\n * @param propsChildren // props \u6216\u8005children\n * @param children children\n */\nexport function h(type, propsOrChildren, children) {\n  const l = arguments.length;\n  if (l === 2) {\n    // type + props || type + children\n    // h('div','hello')\n    // h('div',{style:{color:'red'}})\n    // h('div',[h('span',null,'hello'),h('span',null,'world')])\n    if (!isArray(propsOrChildren) && isObject(propsOrChildren)) {\n      if (isVnode(propsOrChildren)) {\n        // \u5904\u7406 propsOrChildren \u662Fvnode\n        return createVnode(type, null, [propsOrChildren]);\n      }\n      // \u5904\u7406propsOrChildren\u53EA\u662F\u5C5E\u6027\n      return createVnode(type, propsOrChildren);\n    } else {\n      // \u5904\u7406propsOrChildren\u662F\u6587\u672C\u6216\u8005\u6570\u7EC4\n      return createVnode(type, null, propsOrChildren);\n    }\n  } else {\n    if (l > 3) {\n      // \u62FF\u5230\u6240\u6709\u7684children\n      children = [...arguments].slice(2);\n    } else if (l === 3 && isVnode(children)) {\n      // h('div',{},h('div','hello'))\n      children = [children];\n    }\n    return createVnode(type, propsOrChildren, children);\n  }\n}\n", "export const nodeOps = {\n  // \u8981\u63D2\u5165\u7684\u8282\u70B9 \u7236\u8282\u70B9 \u53C2\u7167\u7269\n  insert(child: Element, parent: Element, anchor: Element = null) {\n    parent.insertBefore(child, anchor);\n  },\n  remove(child: Element) {\n    const parentNode = child.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(child);\n    }\n  },\n  setElementText(el, text) {\n    el.textContent = text;\n  },\n  setText(node, text) {\n    node.nodeValue = text;\n  },\n  querySelector(selector) {\n    return document.querySelector(selector);\n  },\n  parentNode(node) {\n    return node.parentNode;\n  },\n  nextSibling(node) {\n    return node.nextSibling;\n  },\n  createElement(tagName) {\n    return document.createElement(tagName);\n  },\n  createText(text) {\n    return document.createTextNode(text);\n  },\n};\n", "/**\n * @param el dom\u5BF9\u8C61\n * @param key \u5C5E\u6027\u540D\n * @param nextValue \u65B0\u7684\u5C5E\u6027\u503C\n */\nexport function patchAttr(el: Element, key, nextValue) {\n  if (nextValue) {\n    el.setAttribute(key, nextValue);\n  } else {\n    el.removeAttribute(key);\n  }\n}\n", "/**\n * @param el dom\u5BF9\u8C61\n * @param nextValue \u65B0\u7684class\u540D\n */\nexport function patchClass(el: Element, nextValue) {\n  if (nextValue == null) {\n    el.removeAttribute(\"class\");\n  } else {\n    el.className = nextValue;\n  }\n}\n", "function createInvoker(callback) {\n  const invoker = (e) => invoker.value(e);\n  invoker.value = callback;\n  return invoker;\n}\n/**\n * @param el dom\u5BF9\u8C61\n * @param eventName \u4E8B\u4EF6\u540D\n * @param nextValue \u4E8B\u4EF6\u5904\u7406\u51FD\u6570\n */\nexport function patchEvent(el, eventName, nextValue) {\n  let invokers = el._vei || (el._vei = {});\n  // \u770B\u8BE5\u4E8B\u4EF6\u539F\u6765\u5B58\u4E0D\u5B58\u5728\n  let exits = invokers[eventName];\n\n  if (exits && nextValue) {\n    exits.value = nextValue;\n  } else {\n    let event = eventName.slice(2).toLowerCase();\n    if (nextValue) {\n      const invoker = (invokers[eventName] = createInvoker(nextValue));\n      el.addEventListener(event, invoker);\n    } else if (exits) {\n      el.removeEventListener(event, exits);\n      invokers[eventName] = undefined;\n    }\n  }\n}\n", "/**\n * @param el dom\u5BF9\u8C61\n * @param prevValue style\u7684\u65E7\u5BF9\u8C61\n * @param nextValue style\u7684\u65B0\u5BF9\u8C61\n */\nexport function patchStyle(el, prevValue, nextValue) {\n  for (const key in nextValue) {\n    el.style[key] = nextValue[key];\n  }\n  // \u8001\u7684\u6709\u7684\uFF0C\u4F46\u662F\u65B0\u7684\u6CA1\u6709\uFF0C\u5C31\u5220\u6389\n  if (prevValue) {\n    for (const key in prevValue) {\n      if (!nextValue[key]) {\n        el.style[key] = null;\n      }\n    }\n  }\n}\n", "// \u6BD4\u5BF9\u5C5E\u6027 \uFF08\u521B\u5EFA \u4FEE\u6539 \u79FB\u9664\uFF09\nimport { patchAttr } from \"./modules/attr\";\nimport { patchClass } from \"./modules/class\";\nimport { patchEvent } from \"./modules/event\";\nimport { patchStyle } from \"./modules/style\";\n\n/**\n * @param el \u5143\u7D20\n * @param key class style...\n * @param prevValue \u539F\u6765\u7684\u503C\n * @param nextValue \u65B0\u503C\n */\nexport function patchProp(el, key, prevValue, nextValue) {\n  // className\n  if (key === \"class\") {\n    patchClass(el, nextValue);\n  } else if (key === \"style\") {\n    // style\n    patchStyle(el, prevValue, nextValue);\n  } else if (/^on[^a-z]/.test(key)) {\n    //events\n    patchEvent(el, key, nextValue);\n  } else {\n    //\u666E\u901A\u5C5E\u6027\n    patchAttr(el, key, nextValue);\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
